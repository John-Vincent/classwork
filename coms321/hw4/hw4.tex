\documentclass[11pt]{article}
\usepackage{mathtools}
\usepackage{mdframed}
\usepackage{fullpage}
\usepackage{amsfonts}
\usepackage{tikz}



%edit this for each class
\newcommand\name{John Vincent}
\newcommand\classname{Com S 321}
\newcommand\assignment{Homework 4}



\newcounter{excounter}
\setcounter{excounter}{1}
\newcommand\question[2]{\vskip 1em  \noindent\textbf{\arabic{excounter}\addtocounter{excounter}{1}.} \emph{#1} \noindent#2}


% You can also erase this if you do not have package fancyhdr
% Fancy footnote.........
\usepackage{fancyhdr}  %% If it does not work with your latex installation, you may just delete this...
\pagestyle{fancy}
\usepackage{lastpage}
\rfoot{\name, page \thepage/\pageref{LastPage}}
\cfoot{}
\rhead{}
\lhead{}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}
\DeclarePairedDelimiter\ceil{\lceil}{\rceil}
\DeclarePairedDelimiter\floor{\lfloor}{\rfloor}



\begin{document}


  {\bf \classname \hspace{1cm} \assignment\hfill \name}
  \vskip 2em


  \question{}
  M2 is 100\% faster than M1 on program 1.\\
  \indent M1 is 33\% faster than M2 on program 2.

  \question{}
  \begin{align*}
    \text{MIPS}_{\text{M1}} &= \frac{200}{10} = 20\\
    \text{MIPS}_{\text{M2}} &= \frac{160}{5} = 32\\
  \end{align*}

  \question{}
  \begin{align*}
    \text{Time} &= \text{CPI} * \text{Instructions} * \frac{1}{\text{Clock Rate}}\\\\
    10 &= \text{CPI}_{\text{M1}} * 200*10^6 * \frac{1}{200*10^6}\\
    \text{CPI}_{\text{M1}} &= 10\\\\
    5 &= \text{CPI}_{\text{M2}} * 160*10^6 * \frac{1}{300*10^6}\\
    9.375 &= \text{CPI}_{\text{M2}}
  \end{align*}

  \question{}
  \begin{align*}
    \text{Time} &= \text{CPI} * \text{Instructions} * \frac{1}{\text{Clock Rate}}\\\\
    3 &= 10 * \text{Instructions}_{\text{M1}} * \frac{1}{200*10^6}\\
    60*10^6 &=  \text{Instructions}_{\text{M1}}\\\\
    4 &= 9.375 *\text{Instructions}_{\text{M2}} * \frac{1}{300*10^6}\\
    128*10^6 &= \text{Instructions}_{\text{M2}}
  \end{align*}

  \question{}
  \begin{align*}
    \frac{\text{Cost}_{\text{M2}}}{\text{Cost}_{\text{M1}}} &= \frac{15000}{10000} = 1.5\\
    \frac{\text{Time}_{\text{M1}}}{\text{Time}_{\text{M2}}} &= \frac{10}{5} = 2\\
    \frac{\text{Cost}_{\text{M2}}*\text{Time}_{\text{M2}}}{\text{Cost}_{\text{M1}}*\text{Time}_{\text{M1}}} &= 1.33
  \end{align*}
  \indent I would buy M2 in bulk because it is 100\% faster than M1, and its only 50\% more expensive than M1. so the cost/preformance is 33\% better with M2.

  \question{}
  \begin{align*}
    \text{MIPS}_{\text{peak-M1}} &= 500 \div 1\\
    \text{MIPS}_{\text{peak-M2}} &= 750 \div 2 =375\\
  \end{align*}

  \question{}
  \begin{align*}
    \text{Time}_{\text{M1}} &= 2.5 * 200 * 10^6 * \frac{1}{500*10^6} = 1\\
    \text{Time}_{\text{M2}} &= 3 * 160 * 10^6 * \frac{1}{750*10^6} = .64\\
    \frac{1}{.64} &= 1.56
  \end{align*}
  \indent M2 is 56\% faster than M1.

  \question{}
  \begin{align*}
    .64 &= 2.5 * 200 * 10^6 * \frac{1}{\text{Clock Rate}}\\
    \text{Clock Rate} &= 781.25\text{MHz}
  \end{align*}

  \question{}\\
  \indent a)\\
  \begin{align*}
    \text{MIPS}_{\text{MNFP}} &= \frac{1000}{2} = 500\\
    \text{MIPS}_{\text{MFP}} &= \frac{1000}{.1*6 + .15*4 + .05*20 + .7*2} = \frac{1000}{3.6} = 277
  \end{align*}
  \indent b)
  \begin{align*}
    \text{Instructions} &= 300(.1*30 + .15 *20 + .5*50 + .7)\\
    &= 9510 \text{million instructions}
  \end{align*}
  \indent c)
  \begin{align*}
    \text{Time}_{\text{MFP}} &= \frac{300}{277}\\
    &= 1.08\\\\
    \text{Time}_{\text{MFP}} &= \frac{9510}{500}\\
    &= 19
  \end{align*}

\end{document}
